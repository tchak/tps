- if input_disabled_unless_international?
  .fr-input-group
    = render Dsfr::ComboboxComponent.new form: @form, url: data_sources_data_source_adresse_path, selected: @champ.value, input_html_options: { name: :value, id: @champ.input_id, class: 'fr-select', describedby: @champ.describedby_id } do
      = @form.hidden_field :external_id, data: { value_slot: 'value' }
      = @form.hidden_field :feature, data: { value_slot: 'data' }

.fr-input-group
  .fr-fieldset__element
    .fr-checkbox-group
      = @form.check_box :not_in_ban, { class: "fr-input", checked: !@champ.ban?, disabled: @champ.international? }, 'true', 'false'
      = @form.label :not_in_ban, class: 'fr-label' do
        - t('.not_in_ban')

- if filled?
  .fr-input-group
    = @form.label :street_address, for: @champ.street_input_id, class: 'fr-label' do
      - t('.street_label')
    = @form.text_field :street_address, class: "width-66-desktop fr-input small-margin", id: @champ.street_input_id, disabled: input_disabled_unless_international?

- if @champ.international?
  .fr-input-group
    = @form.label :city_name, for: @champ.city_input_id, class: 'fr-label' do
      - t('.city_label')
    = @form.text_field :city_name, class: "width-33-desktop fr-input small-margin", id: @champ.city_input_id

  .fr-input-group
    = @form.label :code_postal, for: @champ.code_postal_input_id, class: 'fr-label' do
      - t('.code_postal_label')
    = @form.text_field :code_postal, class: "width-33-desktop fr-input small-margin", id: @champ.code_postal_input_id
- elsif filled?
  .fr-input-group
    = @form.label :commune_name, for: @champ.city_input_id, class: 'fr-label' do
      - t('.commune_label')
    - if input_disabled?
      = @form.text_field :commune_name, class: "width-33-desktop fr-input small-margin", id: @champ.city_input_id, disabled: true
    - else
      = render Dsfr::ComboboxComponent.new form: @form, url: data_sources_data_source_commune_path, selected: [@champ.commune_name, @champ.city_code], limit: 20, input_html_options: { name: :city_code, id: @champ.commune_input_id, class: 'fr-select', describedby: @champ.describedby_id } do
        = @form.hidden_field :code_postal, data: { value_slot: 'data:string' }


  .fr-input-group
    = @form.label :departement_code_and_name, for: @champ.departement_input_id, class: 'fr-label' do
      - t('.departement_label')
    = @form.text_field :departement_code_and_name, class: "width-33-desktop fr-input small-margin", id: @champ.departement_input_id, disabled: true

- if filled?
  .fr-input-group
    = @form.label :country_code, for: @champ.pays_input_id, class: 'fr-label' do
      - t('.pays_label')
    = @form.select :country_code, pays_options, @champ.mandatory? ? { prompt: '' } : { include_blank: '' }, disabled: input_disabled_unless_international?, required: @champ.required?, id: @champ.pays_input_id, class: "width-33-desktop fr-select small-margin"
